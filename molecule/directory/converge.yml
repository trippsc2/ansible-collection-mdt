---
- name: Converge
  hosts:
    - subjects
  tasks:
    - name: Check MDT directory
      check_mode: true
      trippsc2.mdt.directory:
        path: Operating Systems\Windows 10
        mdt_share_path: C:\MDTShare
        state: present

    - name: Create MDT directory
      trippsc2.mdt.directory:
        path: Operating Systems\Windows 10
        mdt_share_path: C:\MDTShare
        state: present

    - name: Check MDT directory
      check_mode: true
      trippsc2.mdt.directory:
        path: Operating Systems\Windows 11
        mdt_share_path: C:\MDTShare
        state: present

    - name: Create MDT directory
      trippsc2.mdt.directory:
        path: Operating Systems\Windows 11
        mdt_share_path: C:\MDTShare
        state: present

    - name: Check MDT directory
      check_mode: true
      trippsc2.mdt.directory:
        path: Operating Systems\Windows 12
        mdt_share_path: C:\MDTShare
        state: absent

    - name: Remove MDT directory
      trippsc2.mdt.directory:
        path: Operating Systems\Windows 12
        mdt_share_path: C:\MDTShare
        state: absent

    - name: Check MDT directory
      check_mode: true
      trippsc2.mdt.directory:
        path: Out-of-Box Drivers\WinPE
        mdt_share_path: C:\MDTShare
        state: absent

    - name: Remove MDT directory
      trippsc2.mdt.directory:
        path: Out-of-Box Drivers\WinPE
        mdt_share_path: C:\MDTShare
        state: absent
